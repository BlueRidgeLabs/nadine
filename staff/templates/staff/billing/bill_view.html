{% extends "staff/billing/base.html" %}
{% load list_tags %}

{% block sub-title %}Bill | {{ bill.user.get_full_name }}{% endblock %}

{% block content %}

<h4>Bill {{ bill.id }}: <a href="{% url 'staff:members:detail' bill.user.username %}">{{ bill.user.get_full_name }}</a></h4>
[ <a href="{{ bill.get_absolute_url }}">view receipt </a> | <a href="{{ bill.get_admin_url }}">admin</a> ]

<h5>Detail</h5>
<table>
  <tr>
    <th>Created:</th>
    <td>{{ bill.created_ts }}</td>
  </tr>
  <tr>
    <th>Period:</th>
    <td>
      {{ bill.period_start|date:"m/d/y" }} to {{ bill.period_end|date:"m/d/y" }}
    </td>
  </tr>
  <tr>
    <th>Membership</th>
    <td>
      {% if bill.membership %}
        <a href="{% url 'staff:members:membership' user.username %}">{{ bill.membership.package }}</a>
      {% else %}
        None
      {% endif %}
    </td>
  </tr>
  <tr>
    <th>Amount:</th>
    <td>${{ bill.amount }}</td>
  </tr>
  <tr>
    <th>Paid:</th>
    <td>${{ bill.total_paid }}</td>
  </tr>
</table>

<h5>Line Items</h5>
<table>
  <tr>
    <th>Description</th>
    <th>Amount</th>
  </tr>
  {% for line_item in bill.line_items.all %}
      <tr>
          <td>{{ line_item.description }}</td>
          <td style="text-align: right;">${{ line_item.amount|floatformat:2 }}</td>
      </tr>
  {% endfor %}
</table>

{% endblock %}
