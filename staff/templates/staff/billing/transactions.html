{% extends "staff/billing/base.html" %}

{% block sub-title %}Transactions{% endblock %}

{% block content %}

<h4>Transactions:</h4>

{% if not transactions %}
<p>There are no transactions!</p>
{% endif%}

<div class="columns">
{% include "staff/date_range_form.html"%}
</div>

<table id="transaction-list">
	{% for transaction in transactions %}
		<tr class="{% cycle 'row-even' 'row-odd' %}">
			<td><a href="{% url 'staff:billing:transaction' transaction.id %}">{{ transaction.transaction_date | date:"Y-m-d" }}</a></td>
			<td><a href="{% url 'staff:members:detail' transaction.user.username %}">{{ transaction.user.get_full_name }}</a></td>
			<td>${{ transaction.amount }}</td>
		</tr>
	{% endfor %}
</table>

{% endblock %}

{% block extrajs %}
<script>
	$(document).ready(function() {
		$('.button-collapse').sideNav();
		$('.collapsible').collapsible();
		$('div .error').hide();
		
		{% for message in messages %}
      {% if message.tags == 'error' %}
        Materialize.toast('{{ message }}', 60000, 'error-msg msg');
      {% else %}
        Materialize.toast('{{ message }}', 3000, '{{ message.tags }}-msg msg');
      {% endif %}
    {% endfor %}

    $(document).on('click', '#toast-container .toast', function() {
      $(this).fadeOut(function(){
        $(this).remove();
      });
    });
	})
</script>
{% endblock %}
