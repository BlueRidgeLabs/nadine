{% extends "members/u_base.html" %}
{% load imagetags %}

{% block sub-title %}Organization | {% endblock %}

{% block style %}
{% endblock %}

{% block content %}
<h3 class='oswald' style='text-align: center;'>Edit {{ organization.name}}</h3>
<form class='org-form' method="POST" action="." enctype="multipart/form-data">
	{{ form.org_id }}
	<table>
		<tr>
			<td class='org-label'>
				Organization Name
			</td>
			<td>
				{{ form.name }}
			</td>
		</tr>
		<tr>
			<td class='pf-error'>
				{{ form.name.errors }}
			</td>
		</tr>
		<tr>
			<td class='org-label'>
				Organization Blurb
				(<a onclick="$('#blurb_help').toggle();">?</a>)
			</td>
			<td>
				{{ form.blurb }}
			</td>
		</tr>
		<tr>
			<td class='pf-error'>
				{{ form.blurb.errors }}
			</td>
		</tr>
	</table>
	<table>
		<tr id='blurb_help' class='help_text' style='display:none;' >
			<td>
				<p>This is a short organization description which will be visible on your organization's card on the main organzation page. The maximum length of the blurb is 112 characters.</p>
			</td>
		</tr>
	</table>
	<table>
		<tr>
			<td class='org-label'>
				Organization Bio
			</td>
			<td>
				{{ form.bio }}
			</td>
		</tr>
		<tr>
			<td class='pf-error'>
				{{ form.bio.errors }}
			</td>
		</tr>
		<tr>
			<td class='org-label'>
				Logo
			</td>
			<td>
				{{ form.photo }}
			</td>
		</tr>
		<tr>
			<td class='pf-error'>
				{{ form.photo.errors }}
			</td>
		</tr>
		<tr>
			<td class='org-label'>
				Make Organization Profile Public?
				(<a onclick="$('#public_help').toggle();">?</a>)
			</td>
			<td>
				<select class='browser-default input-field col s4'name='public' id='id_public'>
					<option value="" disabled selected></option>
					<option value="False" selected="true">No</option>
					<option value="True">Yes</option>
				</select>
			</td>
		</tr>
		<tr>
			<td class='pf-error'>
				{{form.public.errors}}
			</td>
		</tr>
	</table>
	<table>
		<tr id='public_help' class='help_text' style='display:none;' >
			<td>
				<p>By default your organization profile is only viewable by active members. If you you make this organization public, your blurb, logo, and links will also be visable to non-members as well.  Contact information is always kept private.</p>
			</td>
		</tr>
	</table>
	<input class='btn org-btn' type="submit" value="Save"/>
	<input type="button" value="Cancel" class='btn cancel-btn' onclick="location.href='{% url 'member_org_view' organization.id %}'"/>
	{% csrf_token %}
</form>

{% endblock %}

{% block extrajs %}
<script>
	$(document).ready(function() {
		$('#id_blurb').on('focusout', function(){
			var blurb = $('#id_blurb').val();

			if(blurb.length > 112) {
				$('#id_blurb').css('border', 'red solid 1px');
			} else {
				$('#id_blurb').css('border', 'none');
			}
		})
	});
</script>
{% endblock %}
